# ğŸ“Š GUIDE - ANALYSE ET SUIVI DU STOCK EN LIVRAISON

## ğŸ¯ OBJECTIF

VÃ©rifier et analyser en temps rÃ©el le **stock actuellement avec les livreurs** pour garantir des calculs exacts et suivre prÃ©cisÃ©ment tous les retours.

---

## ğŸš€ NOUVELLE PAGE : "Livraisons en Cours"

### **ğŸ“ AccÃ¨s**

**Pour le Gestionnaire de Stock :**

```
Menu â†’ ğŸšš Livraisons en cours
URL: https://www.obgestion.com/stock/livraisons-en-cours
```

---

## ğŸ“Š FONCTIONNALITÃ‰S PRINCIPALES

### **1. Statistiques Globales**

La page affiche en temps rÃ©el :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ Commandes en livraison        : 18          â”‚
â”‚  ğŸ“Š QuantitÃ© totale               : 45          â”‚
â”‚  ğŸšš Livreurs actifs               : 5           â”‚
â”‚  ğŸ“¦ Produits concernÃ©s            : 8           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **2. Vue par Produit**

Voir **quel stock est sorti pour chaque produit** :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CrÃ¨me Anti-Cerne (CREME_ANTI_CERNE)            â”‚
â”‚                                                 â”‚
â”‚  QuantitÃ© en livraison : 12                     â”‚
â”‚  Commandes : 8                                  â”‚
â”‚  Livreurs : 3                                   â”‚
â”‚                                                 â”‚
â”‚  ğŸ“‹ DÃ©tails des commandes :                     â”‚
â”‚  â€¢ REF-12345 - Mme Kouassi (Ã—2)                â”‚
â”‚    ğŸšš Konan Jean                                â”‚
â”‚    ğŸ“… 15/12/2024                                â”‚
â”‚                                                 â”‚
â”‚  â€¢ REF-12346 - M. TraorÃ© (Ã—3)                  â”‚
â”‚    ğŸšš Bamba Marie                               â”‚
â”‚    ğŸ“… 15/12/2024                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Avantages :**
- Voir exactement combien d'unitÃ©s de chaque produit sont sorties
- Identifier rapidement quel livreur a quel produit
- Suivre les dates de livraison prÃ©vues

---

### **3. Vue par Livreur**

Voir **tout ce qui est avec chaque livreur** :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ Kouassi Jean                                â”‚
â”‚                                                 â”‚
â”‚  QuantitÃ© totale : 15                           â”‚
â”‚  Commandes : 6                                  â”‚
â”‚  Produits : 3                                   â”‚
â”‚                                                 â”‚
â”‚  ğŸ“¦ Produits :                                  â”‚
â”‚  â€¢ CrÃ¨me Anti-Cerne      : Ã—8                   â”‚
â”‚  â€¢ Gaine Tourmaline      : Ã—5                   â”‚
â”‚  â€¢ Patch Anti-Cicatrice  : Ã—2                   â”‚
â”‚                                                 â”‚
â”‚  ğŸ“‹ Liste des commandes :                       â”‚
â”‚  â€¢ REF-12345 - CrÃ¨me Anti-Cerne (Ã—2)           â”‚
â”‚    ğŸ‘¤ Mme Kouassi                               â”‚
â”‚    ğŸ“… 15/12/2024                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Avantages :**
- Voir instantanÃ©ment ce que chaque livreur a en sa possession
- VÃ©rifier le stock avant qu'il ne parte en livraison
- Faciliter le contrÃ´le au retour de tournÃ©e

---

### **4. DÃ©tection Automatique des Ã‰carts** âš ï¸

Le systÃ¨me compare automatiquement :

**Stock enregistrÃ© en BDD** VS **Stock rÃ©el en livraison (commandes ASSIGNEE)**

Si un Ã©cart est dÃ©tectÃ©, une **alerte rouge** s'affiche :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ 2 Ã©cart(s) dÃ©tectÃ©(s)                       â”‚
â”‚                                                 â”‚
â”‚  Les quantitÃ©s enregistrÃ©es ne correspondent    â”‚
â”‚  pas aux commandes en cours.                    â”‚
â”‚                                                 â”‚
â”‚  ğŸ“¦ CrÃ¨me Anti-Cerne                            â”‚
â”‚     EnregistrÃ© : 10                             â”‚
â”‚     RÃ©el : 12                                   â”‚
â”‚     Ã‰cart : +2 (MANQUE EN BDD)                  â”‚
â”‚                                                 â”‚
â”‚  ğŸ“¦ Gaine Tourmaline                            â”‚
â”‚     EnregistrÃ© : 8                              â”‚
â”‚     RÃ©el : 5                                    â”‚
â”‚     Ã‰cart : -3 (SURPLUS EN BDD)                 â”‚
â”‚                                                 â”‚
â”‚  [Corriger les Ã©carts maintenant]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Types d'Ã©carts :**
- **MANQUE_EN_BDD** : Des commandes existent mais le stock n'a pas Ã©tÃ© dÃ©placÃ©
- **SURPLUS_EN_BDD** : Du stock est marquÃ© "en livraison" mais aucune commande n'existe

---

## ğŸ”§ FONCTIONNALITÃ‰S AVANCÃ‰ES

### **ğŸ“Š Actualiser**

Bouton pour recharger les donnÃ©es en temps rÃ©el.

### **ğŸ”„ Recalculer**

**Fonction critique** : Recalcule automatiquement le stock en livraison pour chaque produit.

**Ce qu'elle fait :**

1. âœ… Compte toutes les commandes **ASSIGNEE** par produit
2. âœ… Compare avec le `stockLocalReserve` enregistrÃ©
3. âœ… Corrige automatiquement les Ã©carts
4. âœ… CrÃ©e des mouvements de stock de type **CORRECTION**
5. âœ… GÃ©nÃ¨re un rapport dÃ©taillÃ© des corrections

**Quand l'utiliser :**
- âš ï¸ Si vous constatez des Ã©carts
- ğŸ”§ AprÃ¨s avoir corrigÃ© manuellement des statuts de commandes
- ğŸ“Š PÃ©riodiquement pour vÃ©rifier la cohÃ©rence

---

## ğŸ”Œ API DISPONIBLES

### **1. Analyse ComplÃ¨te**

```http
GET /api/stock-analysis/local-reserve
```

**RÃ©ponse :**

```json
{
  "summary": {
    "totalCommandes": 18,
    "totalQuantite": 45,
    "totalProduitsConcernes": 8,
    "totalLivreurs": 5,
    "totalEcarts": 2,
    "ecartQuantite": 5
  },
  "parProduit": [
    {
      "product": {
        "id": 1,
        "code": "CREME_ANTI_CERNE",
        "nom": "CrÃ¨me Anti-Cerne",
        "stockLocalReserve": 12
      },
      "quantiteReelle": 12,
      "quantiteEnregistree": 12,
      "commandes": [...],
      "nombreLivreurs": 3
    }
  ],
  "parLivreur": [
    {
      "deliverer": {
        "id": 5,
        "nom": "Kouassi",
        "prenom": "Jean"
      },
      "totalQuantite": 15,
      "produits": {...},
      "commandes": [...]
    }
  ],
  "ecarts": [
    {
      "productId": 2,
      "productNom": "Gaine Tourmaline",
      "quantiteReelle": 12,
      "quantiteEnregistree": 10,
      "ecart": 2,
      "type": "MANQUE_EN_BDD"
    }
  ]
}
```

---

### **2. Recalcul Automatique**

```http
POST /api/stock-analysis/recalculate-local-reserve
```

**RÃ©ponse :**

```json
{
  "message": "Recalcul terminÃ© avec succÃ¨s",
  "totalCorrections": 3,
  "corrections": [
    {
      "productId": 2,
      "productNom": "CrÃ¨me Anti-Cerne",
      "ancien": 10,
      "nouveau": 12,
      "ecart": 2
    }
  ]
}
```

---

### **3. DÃ©tails par Livreur**

```http
GET /api/stock-analysis/deliverer-details/:delivererId
```

**RÃ©ponse :**

```json
{
  "delivererId": 5,
  "totalCommandes": 6,
  "totalQuantite": 15,
  "totalValeur": 148500,
  "parProduit": [
    {
      "product": {
        "nom": "CrÃ¨me Anti-Cerne",
        "prixUnitaire": 9900
      },
      "quantite": 8,
      "commandes": [...]
    }
  ]
}
```

---

## ğŸ’¡ CAS D'USAGE

### **ScÃ©nario 1 : VÃ©rification quotidienne**

**Chaque matin :**

1. ğŸ“Š Ouvrir "Livraisons en cours"
2. âœ… VÃ©rifier qu'il n'y a pas d'Ã©carts
3. ğŸ‘€ Voir ce qui est sorti avec chaque livreur
4. ğŸ“‹ PrÃ©parer les retours Ã©ventuels

---

### **ScÃ©nario 2 : Retour de tournÃ©e**

**Quand un livreur revient :**

1. ğŸ“± Le livreur marque les commandes LIVRÃ‰E ou RETOURNE
2. âœ… Le stock se met Ã  jour automatiquement
3. ğŸ“Š VÃ©rifier sur "Livraisons en cours" que tout est correct
4. ğŸ”„ Si Ã©cart, cliquer sur "Recalculer"

---

### **ScÃ©nario 3 : DÃ©tection d'anomalie**

**Si vous voyez une alerte rouge :**

1. âš ï¸ Lire l'Ã©cart dÃ©tectÃ©
2. ğŸ” VÃ©rifier manuellement les commandes concernÃ©es
3. ğŸ”§ Corriger manuellement si nÃ©cessaire
4. ğŸ”„ Cliquer sur "Corriger les Ã©carts maintenant"
5. âœ… VÃ©rifier que l'alerte a disparu

---

### **ScÃ©nario 4 : Audit hebdomadaire**

**Chaque semaine :**

1. ğŸ“Š Ouvrir "Livraisons en cours"
2. ğŸ“‹ VÃ©rifier la vue par produit
3. ğŸšš VÃ©rifier la vue par livreur
4. ğŸ”„ Lancer un recalcul prÃ©ventif
5. ğŸ“Š Exporter les donnÃ©es si nÃ©cessaire

---

## ğŸ¯ AVANTAGES DU SYSTÃˆME

### **1. TraÃ§abilitÃ© Totale**
- Savoir exactement oÃ¹ est chaque unitÃ© de produit
- Historique complet des mouvements
- ResponsabilitÃ© claire (qui a quoi)

### **2. PrÃ©vention des Pertes**
- DÃ©tection immÃ©diate des anomalies
- Alerte en cas d'Ã©cart
- Correction automatique possible

### **3. Gain de Temps**
- Plus besoin de compter manuellement
- Calculs automatiques en temps rÃ©el
- Vue consolidÃ©e instantanÃ©e

### **4. FiabilitÃ©**
- Source de vÃ©ritÃ© unique (base de donnÃ©es)
- Recalcul possible Ã  tout moment
- Mouvements tracÃ©s automatiquement

### **5. DÃ©cision Ã‰clairÃ©e**
- DonnÃ©es prÃ©cises pour le rÃ©approvisionnement
- VisibilitÃ© sur les produits populaires
- Optimisation des tournÃ©es

---

## âš™ï¸ INTÃ‰GRATION AVEC LE SYSTÃˆME

### **Flux Automatique**

```
1. GESTIONNAIRE assigne commande â†’ ASSIGNEE
   â†“
   Stock disponible â†’ Stock en livraison (automatique)
   
2. LIVREUR marque LIVREE
   â†“
   Stock en livraison â†’ Sorti dÃ©finitivement (automatique)
   
3. LIVREUR marque RETOURNE
   â†“
   Stock en livraison â†’ Stock disponible (automatique)
```

### **VÃ©rification**

```
Page "Livraisons en cours"
   â†“
   Compare : Stock BDD VS Commandes rÃ©elles
   â†“
   Alerte si Ã©cart dÃ©tectÃ©
   â†“
   Correction automatique possible
```

---

## ğŸ“Š RAPPORT D'EXEMPLE

**Situation rÃ©elle (15/12/2024 - 14h30) :**

```
ğŸ“Š RÃ‰SUMÃ‰ GLOBAL
  â€¢ 18 commandes en cours de livraison
  â€¢ 45 unitÃ©s de produits sorties
  â€¢ 5 livreurs actifs
  â€¢ 8 produits diffÃ©rents

ğŸ“¦ TOP 3 PRODUITS EN LIVRAISON
  1. CrÃ¨me Anti-Cerne : 12 unitÃ©s (3 livreurs)
  2. Gaine Tourmaline : 10 unitÃ©s (2 livreurs)
  3. Patch Anti-Cicatrice : 8 unitÃ©s (2 livreurs)

ğŸšš TOP 3 LIVREURS
  1. Kouassi Jean : 15 unitÃ©s (6 commandes)
  2. Bamba Marie : 12 unitÃ©s (5 commandes)
  3. TraorÃ© Mamadou : 10 unitÃ©s (4 commandes)

âœ… Ã‰TAT DU STOCK
  â€¢ Aucun Ã©cart dÃ©tectÃ©
  â€¢ DonnÃ©es Ã  jour
  â€¢ SystÃ¨me cohÃ©rent
```

---

## âš ï¸ BONNES PRATIQUES

### **Ã€ FAIRE âœ…**

1. âœ… VÃ©rifier la page chaque matin
2. âœ… Lancer un recalcul hebdomadaire
3. âœ… Corriger les Ã©carts dÃ¨s leur dÃ©tection
4. âœ… Former les livreurs Ã  bien marquer les statuts
5. âœ… VÃ©rifier avant/aprÃ¨s chaque tournÃ©e

### **Ã€ Ã‰VITER âŒ**

1. âŒ Ignorer les alertes d'Ã©carts
2. âŒ Modifier manuellement les stocks sans raison
3. âŒ Ne pas vÃ©rifier les retours de tournÃ©e
4. âŒ Laisser des commandes en statut ASSIGNEE trop longtemps
5. âŒ Changer les statuts de commandes manuellement sans comprendre l'impact

---

## ğŸ†˜ SUPPORT

### **ProblÃ¨me : Ã‰cart dÃ©tectÃ©**

**Solution :**
1. VÃ©rifier les commandes concernÃ©es manuellement
2. Corriger le statut des commandes si nÃ©cessaire
3. Cliquer sur "Recalculer"

### **ProblÃ¨me : Stock nÃ©gatif**

**Solution :**
1. VÃ©rifier l'historique des mouvements
2. Identifier la source du problÃ¨me
3. Ajuster manuellement le stock si nÃ©cessaire
4. Recalculer le stock en livraison

### **ProblÃ¨me : Livreur a plus que prÃ©vu**

**Solution :**
1. VÃ©rifier si toutes les commandes ont Ã©tÃ© assignÃ©es correctement
2. VÃ©rifier si des retours n'ont pas Ã©tÃ© marquÃ©s
3. Recalculer le stock

---

## ğŸ“ CONTACT

Pour toute question ou problÃ¨me, contactez l'administrateur systÃ¨me.

**Version :** 1.0  
**Date de crÃ©ation :** 15 dÃ©cembre 2024  
**DerniÃ¨re mise Ã  jour :** 15 dÃ©cembre 2024

---

## ğŸ“ FORMATION

**DurÃ©e recommandÃ©e :** 30 minutes

**Contenu :**
1. PrÃ©sentation de la page (5 min)
2. Navigation et filtres (5 min)
3. InterprÃ©tation des donnÃ©es (10 min)
4. Gestion des Ã©carts (5 min)
5. Exercices pratiques (5 min)

---

âœ… **Ce systÃ¨me garantit une gestion prÃ©cise et transparente du stock en cours de livraison !**

